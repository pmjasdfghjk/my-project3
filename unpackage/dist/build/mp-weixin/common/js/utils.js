"use strict";const s=require("../vendor.js");const i=new class{constructor(){this.baseUrl="https://code.itndedu.com/pz",this.isLoading=!1}getUserInfo(){s.index.login({success:s=>{this.request({url:"/auth/wxLogin",data:{code:s.code},success:s=>{console.log(s,"res")}})}})}request(i={showLoading:!1}){if(!i.url)return!1;i.showLoading&&this.showLoading(),s.index.request({url:this.baseUrl+i.url,data:i.data?i.data:{},header:i.header?i.header:{},method:i.method?i.method:"GET",success:s=>{this.hideLoading(),1e4!==s.data.code?i.fail&&"function"==typeof i.fail&&i.fail(s):i.success&&"function"==typeof i.success&&i.success(s.data)},fail:s=>{this.hideLoading(),console.log(s)}})}showLoading(){this.isLoading||s.index.showLoading({title:"加载中",success:()=>{this.isLoading=!0},fail:()=>{this.isLoading=!1}})}hideLoading(){this.isLoading&&(s.index.hideLoading(),this.isLoading=!1)}};exports.utils=i;
